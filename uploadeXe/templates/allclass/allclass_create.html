{% extends "managebase.html" %}
{% block title %}Add a Class {% endblock %}

{% block navigate %}
<a href="/userstable/"><button id="usertablenav" type="button" style="width:150px;height:50px;margin-top:10px;margin-right:10px;margin-left:40px;">Users</button></a>
<a href="/schoolstable/"><button id="schooltablenav" type="button"style="width:150px;height:50px;margin-top:10px;margin-right:10px;">Schools</button></a>
<a href="/allclassestable/"><button id="allclasstablenav" class="ui-state-hover" type="button"style="width:150px;height:50px;margin-top:10px;margin-right:10px;">Classes</button></a>
<a href="/upload/"><button id="coursesnav" type="button"style="width:149px;height:50px;margin-top:10px;margin-right:10px;">Courses</button></a>

<hr>
<p></p>
{% endblock %}


{% block scriptjs %}
<script type="text/javascript">
	var map_students = [{% for student in student_list %}"{{student.id}}|{{ student|escapejs }}"{% if not forloop.last %},{% endif %}{% endfor %}];
	var students_map = [{% for student in student_list %}
			{ "value" : "{{ student.id }}",
			"label" : "{{student.first_name}} {{student.last_name}} ({{student.username}})"
			},
		{% endfor %}];
          $(function() { 
			$('#class_name').puiinputtext();
        		$('#class_desc').puiinputtext();
        		$('#class_location').puiinputtext();
			$('#school').puidropdown();
			$('#teacher').puidropdown();
			$('#submit').puibutton();

			$('#selectstudentsfornewallclass').puipicklist({  
    				effect: 'clip',  
    				showSourceControls: true,  
    				showTargetControls: true,  
    				sourceCaption: 'Available',  
    				targetCaption: 'Selected',  
    				filter: true,  
    				sourceData:students_map,  
    				content: function(option) {  
        				return '<img src="/media/' + "user" + '.png" alt="" /><span style="">' + option.label.replace(/^\s+|\s+$/g, '') + '</span>';  
    				}  
			});  
                }
          ); 
	var course_map = [	
			{% for course in course_list %}
				{
				"value":"{{course.id}}",
				"label":"{{course.name}} (ID: {{course.id}})"
				},
			{% endfor %}
			];
	$(function() { 
                        $('#selectcoursesfornewallclass').puipicklist({  
                                effect: 'clip',  
                                showSourceControls: true,  
                                showTargetControls: true,  
                                sourceCaption: 'Available',  
                                targetCaption: 'Selected',  
                                filter: true,  
                                sourceData:course_map,  
                                content: function(option) {  
                                        return '<img src="/media/' + "course" + '.png" alt="" /><span style="">' + option.label.replace(/^\s+|\s+$/g, '') + '</span>';  
                                }  
                        });  
                }
          ); 

</script>
{% endblock %}

{% block content %}

<form id="newclassform" method="post">{% csrf_token %}
    <h1>Create a New Class</h1>
    <div data-role="fieldcontain">
        <label for="class_name">Class Name:  </label><input type="text" name="class_name" id="class_name" value="" />
    </div>
    <div data-role="fieldcontain">
        <label for="class_desc">Class Desc:  </label><input type="text" name="class_desc" id="class_desc" value="" />
    </div>
    <div data-role="fieldcontain">
        <label for="class_location">Class Location:  </label><input type="text" name="class_location" id="class_location" value="" />
    </div>
   <label>Associative School:</label> <select id="school" form="newclassform" name="schoolid">
        {% for school in object_list %}
        <option value="{{ school.id }}">{{ school.school_name }}</option>
        {% endfor %}
   </select><a href="/schoolnew/">Create an associative school first</a> </i>
   <p></p>
   <label>Teacher in charge:</label> <select id="teacher" form="newclassform" name="teacherid">
        	{% for teacher in teacher_list %}
        	<option value="{{ teacher.id }}">{{ teacher.first_name }} {{teacher.last_name}} </option>
        	{% endfor %} 
   </select>
   <i><a href="/usernew/"> Click here to create a new user</a> </i>
	
   <p></p>
   <h3>Assign Students</h3>  
<div id="selectstudentsfornewallclass" >  
    <select multiple="multiple" id="source" name="source">  
    </select>  
    <select multiple="multiple" id="target" name="target">  
    </select>  
</div>  
   <p></p>
   <h3>Assign Courses to this class</h3>         
<div id="selectcoursesfornewallclass" >
    <select multiple="multiple" id="source" name="source">
    </select>
    <select multiple="multiple" id="target2" name="target2">
    </select>
</div>

   <br></br>

    <button id="submit" type="submit" name="submit" value="Create">Submit</button>
</form>


{% endblock %}
