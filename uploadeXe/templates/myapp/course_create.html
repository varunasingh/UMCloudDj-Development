{% extends "base.html" %}
{% block title %}Add a New Course {% endblock %}

{% block scriptjs %}
<script type="text/javascript">
 	var student_map = [{% for student in student_list %}
                        { "value" : "{{ student.id }}",
                        "label":"{{student.id}}: {{student.first_name}}({{student.username}})"
                        //"label" : "{{package.name}}({{package.url}})"
                        },
                {% endfor %}];

	var package_map = [{% for package in package_list %}
			{ "value" : "{{ package.id }}",
			"label":"<a href=\"{{package.url}}\" target=\"_blank\">{{package.id}}:  {{package.name}}</a>"
			//"label" : "{{package.name}}({{package.url}})"
			},
		{% endfor %}];
          $(function() { 
			$('#course_name').puiinputtext();
			$('#newpackage').puibutton();
        		$('#course_desc').puiinputtext();
        		$('#course_category').puiinputtext();
			$('#course_price').puiinputtext();
			$('#submit').puibutton();

			$('#selectpackagesfornewcourse').puipicklist({  
    				effect: 'clip',  
    				showSourceControls: true,  
    				showTargetControls: true,  
    				sourceCaption: 'Available',  
    				targetCaption: 'Selected',  
    				filter: true,  
    				sourceData:package_map,  
    				content: function(option) {  
        				return '<img src="/media/' + "package" + '.png" alt="" /><span style="">' + option.label.replace(/^\s+|\s+$/g, '') + '</span>';  
    				}  
			});  

			$('#selectstudentsfornewcourse').puipicklist({  
                                effect: 'clip',  
                                showSourceControls: true,  
                                showTargetControls: true,  
                                sourceCaption: 'Available',  
                                targetCaption: 'Selected',  
                                filter: true,  
                                sourceData:student_map,  
                                content: function(option) {  
                                        return '<img src="/media/' + "user" + '.png" alt="" /><span style="">' + option.label.replace(/^\s+|\s+$/g, '') + '</span>';  
                                }  
                        });
                }
          ); 
</script>
{% endblock %}

{% block content %}

<form id="newcourseform" method="post">{% csrf_token %}
    <h1>Create a New Course</h1>
    <div data-role="fieldcontain">
        <label for="course_name">Course Name:  </label><input type="text" name="course_name" id="course_name" value="" />
    </div>
    <div data-role="fieldcontain">
        <label for="course_desc">Course Desc:  </label><input type="text" name="course_desc" id="course_desc" value="" />
    </div>
    <div data-role="fieldcontain">
        <label for="course_category">Course Category:  </label><input type="text" name="course_category" id="course_category" value="" />
    </div>
   <div data-role="fieldcontain">
        <label for="course_price">Course Price:  </label><input type="number" step="0.01" min="0" name="course_price" id="course_price" value="" />
    </div>

   <h3>Assign Packages <a href="/uploadeXe/new"><i>(Upload New)</i></a></h3> 
<div id="selectpackagesfornewcourse" >  
    <select multiple="multiple" id="source" name="source">  
    </select>  
    <select multiple="multiple" id="target" name="target">  
    </select>  
</div>  
<h3>Assign Students to this course</h3>
<div id="selectstudentsfornewcourse" >
    <select multiple="multiple" id="source" name="source">
    </select>
    <select multiple="multiple" id="target2" name="target2">
    </select>
</div>
   <br></br>

   <br></br>

    <button id="submit" type="submit" name="submit" value="Create">Submit</button>
</form>


{% endblock %}
